<!DOCTYPE HTML>
<html>

<head>
    <meta charset="utf-8">

    <style>

      .selected {
        background: #0f0;
      }

      li {
        cursor: pointer;
      }


    </style>
      

</head>
<body>

  Кликни на элемент списка, чтобы выделить его.
  <br>

  <ul id="ul">
    <li>Кристофер Робин</li>
    <li>Винни Пух</li>
    <li>Тигра</li>
    <li>Кенга</li>
    <li>Кролик. Просто Кролик.</li>
  </ul>



  <script>

    let ul = document.getElementById("ul");

    let selectedLis = [];

    ul.onmousedown = (event) => {event.preventDefault()};

    ul.addEventListener('click', function (event) {
      let li = event.target.closest("li");
      if ( !li ) { return };

      if ( !event.ctrlKey && !event.metaKey ) {
        removeSelected();
        li.classList.add("selected");
        selectedLis.push(li);

      } else if ( !event.ctrlKey || !event.metaKey ) {
        if ( li.classList.contains("selected") ) {
          li.classList.remove("selected");
          let pos = selectedLis.indexOf(li);
          selectedLis.splice(pos, 1);

        } else {
          li.classList.add("selected");
          selectedLis.push(li);

        }



      }




      function removeSelected() {
        for ( let li of selectedLis ) {
          li.classList.remove("selected");
        }
        selectedLis = [];
      }





    });



  </script>
  
  

  
</body>

</html>